<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="strict-origin">
    <title>Happy Birthday, AARATI!</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0a043c;
            color: #FFD700;
            font-family: Arial, "Segoe UI", sans-serif;
            text-align: center;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        #countdown {
            font-size: 3rem;
            margin: 20px 0;
            letter-spacing: 2px;
            font-family: Arial, sans-serif;
        }
        #wait-text {
            font-size: 1.2rem;
            color: #FFD700;
            margin-top: 10px;
        }
        #message {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 20px auto;
            display: none;
            text-align: left;
            line-height: 1.6;
            padding: 0 20px;
            unicode-bidi: plaintext;
            font-family: Arial, "Segoe UI", sans-serif;
        }
        #morse-button {
            background: transparent;
            border: 1px solid #FFD700;
            color: #FFD700;
            padding: 10px 20px;
            margin: 20px auto;
            cursor: pointer;
            display: none;
            font-size: 1rem;
            font-family: Arial, sans-serif;
        }
        #morse-code {
            display: none;
            font-family: monospace;
            white-space: pre-wrap;
            margin: 20px auto;
            max-width: 600px;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 5px;
        }
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 1s infinite alternate;
        }
        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            animation: fall 5s linear forwards;
        }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(360deg); }
        }
        .balloon {
            position: absolute;
            width: 40px;
            height: 50px;
            border-radius: 50%;
            animation: float 8s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        #music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255,215,0,0.2);
            border: 1px solid #FFD700;
            color: #FFD700;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            z-index: 100;
            font-family: Arial, sans-serif;
        }
        #audio-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #audio-enable-btn {
            padding: 20px 40px;
            background: #FFD700;
            color: #0a043c;
            border: none;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="audio-overlay">
        <button id="audio-enable-btn">CLICK TO ENABLE AUDIO</button>
    </div>

    <div id="countdown"></div>
    <div id="wait-text">Wait till the countdown hits 00:00:00...</div>

    <div id="message"></div>
    <button id="morse-button">Click for a Hidden Message</button>
    <div id="morse-code"></div>
    <button id="music-toggle">üîá Music Off</button>

    <script>
        // ===== CONFIGURATION ===== //
        const BIRTHDAY_DATE = "2025-03-25T00:00:00+03:00"; // April 15, EEST
        const MAIN_MESSAGE = `Hey AARATI,\n\nI know we haven't talked in a while, but today is a special day, and I couldn't just let it pass without wishing you. Happy Birthday! I genuinely hope this year brings you all the happiness, success, and prosperity you deserve.\n\nMay you always find reasons to smile, the strength to chase your dreams, and the right people who uplift and support you. No matter where life takes you, I hope you stay safe, healthy, and surrounded by love and positivity.\n\nEven though we may not be in touch, just know that I still wish the best for you, always. Enjoy your special day to the fullest, and may this year be even better than the last!\n\nTake care, and once again, Happy Birthday!`;
        const MORSE_CODE = `.. / .-- .. ... .... / .. / -.-. --- ..- .-.. -.. / .... .- ...- . / -... . . -. / .- -... .-.. . / - --- / -. --- - / -.. --- / - .... --- ... . / - .... .. -. --. ... / --- .-. / ... .- -.-- / .-- .... .. -.-. .... / .. / -.. .. -.. --..-- / -... ..- - / .. - / .-- .- ... / -. . -.-. . ... ... .- .-. -.-- / -... . -.-. .- ..- ... . / --- ..-. / -- -.-- / ... .. - ..- .- - .. --- -. .-.-.- / .. / .- -- / .-. . .- .-.. .-.. -.-- / ... --- .-. .-. -.-- / .- -. -.. / .... --- .--. . / ..-. --- .-. / -.-- --- ..- .-. / -... . ... - / .- -. -.. / .- .-.. ... --- / --- ..- .-. / -... . ... - / .. -. / .- -. --- - .... . .-. / ..- -. .. ...- . .-. ... . / ‚ù§Ô∏è`;

        // ===== ELEMENTS ===== //
        const countdownEl = document.getElementById("countdown");
        const waitTextEl = document.getElementById("wait-text");
        const messageEl = document.getElementById("message");
        const morseButtonEl = document.getElementById("morse-button");
        const morseCodeEl = document.getElementById("morse-code");
        const musicToggle = document.getElementById("music-toggle");
        const audioOverlay = document.getElementById("audio-overlay");
        const audioEnableBtn = document.getElementById("audio-enable-btn");

        // ===== AUDIO ===== //
        let audioContext;
        let partyHornSound, cheerSound, bgMusic;
        let isMusicPlaying = false;

        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Party horn sound
                partyHornSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-party-horn-712.mp3");
                partyHornSound.volume = 0.7;
                
                // Cheering sound
                cheerSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-people-cheering-454.mp3");
                cheerSound.volume = 0.5;
                
                // Background music
                bgMusic = new Audio("https://assets.mixkit.co/music/preview/mixkit-happy-birthday-piano-loop-1088.mp3");
                bgMusic.loop = true;
                bgMusic.volume = 0.6;

                // Hide overlay after init
                audioOverlay.style.display = 'none';
                
                // Enable toggle button
                musicToggle.style.display = 'block';
            } catch (e) {
                console.log("Audio init error:", e);
                musicToggle.textContent = "‚ùå Audio Error";
            }
        }

        // ===== COUNTDOWN ===== //
        function updateCountdown() {
            const now = new Date();
            const birthday = new Date(BIRTHDAY_DATE);
            const diff = birthday - now;

            if (diff <= 0) {
                countdownEl.textContent = "00:00:00";
                waitTextEl.style.display = "none";
                startCelebration();
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            countdownEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        }

        // ===== CELEBRATION ===== //
        function startCelebration() {
            // Clear old animations
            document.querySelectorAll('.confetti, .balloon').forEach(el => el.remove());

            // Show message
            messageEl.style.display = "block";
            typeWriter(MAIN_MESSAGE, messageEl);

            // Show Morse button
            morseButtonEl.style.display = "block";
            morseButtonEl.addEventListener("click", () => {
                morseCodeEl.style.display = "block";
                morseCodeEl.textContent = MORSE_CODE;
            });

            // Play sounds
            playCelebrationSounds();
            
            // Start music
            toggleMusic(true);

            // Create animations
            createStars();
            createConfetti();
            createBalloons();
        }

        function playCelebrationSounds() {
            try {
                partyHornSound.play().catch(e => console.log("Horn error:", e));
                setTimeout(() => {
                    cheerSound.play().catch(e => console.log("Cheer error:", e));
                }, 500);
            } catch (e) {
                console.log("Sound error:", e);
            }
        }

        // ===== MUSIC CONTROL ===== //
        function toggleMusic(forcePlay = false) {
            if (!bgMusic) return;
            
            try {
                if (forcePlay || !isMusicPlaying) {
                    bgMusic.play();
                    isMusicPlaying = true;
                    musicToggle.textContent = "üîä Music On";
                } else {
                    bgMusic.pause();
                    isMusicPlaying = false;
                    musicToggle.textContent = "üîá Music Off";
                }
            } catch (e) {
                console.log("Music toggle error:", e);
                musicToggle.textContent = "‚ùå Click to Retry";
            }
        }

        // ===== ANIMATIONS ===== //
        function createStars() {
            for (let i = 0; i < 100; i++) {
                const star = document.createElement("div");
                star.classList.add("star");
                star.style.left = `${Math.random() * 100}vw`;
                star.style.top = `${Math.random() * 100}vh`;
                star.style.width = `${Math.random() * 3 + 1}px`;
                star.style.height = star.style.width;
                star.style.animationDelay = `${Math.random() * 2}s`;
                document.body.appendChild(star);
            }
        }

        function createConfetti() {
            const colors = ["#ff0000", "#00ff00", "#0000ff", "#ffff00", "#ff00ff"];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement("div");
                confetti.classList.add("confetti");
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                document.body.appendChild(confetti);
            }
        }

        function createBalloons() {
            const colors = ["#ff0000", "#00ff00", "#0000ff", "#ffff00", "#ff00ff"];
            for (let i = 0; i < 15; i++) {
                const balloon = document.createElement("div");
                balloon.classList.add("balloon");
                balloon.style.left = `${Math.random() * 100}vw`;
                balloon.style.top = `${Math.random() * 100 + 100}vh`;
                balloon.style.backgroundColor = colors[i % colors.length];
                balloon.style.animationDelay = `${Math.random() * 5}s`;
                document.body.appendChild(balloon);
            }
        }

        function typeWriter(text, element) {
            let i = 0;
            element.textContent = "";
            function typing() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                    setTimeout(typing, 20);
                }
            }
            typing();
        }

        // ===== EVENT LISTENERS ===== //
        audioEnableBtn.addEventListener('click', () => {
            initAudio();
            // Allow one click anywhere to start audio
            document.body.addEventListener('click', () => {
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume();
                }
            }, { once: true });
        });

        musicToggle.addEventListener('click', () => toggleMusic());

        // ===== INITIALIZATION ===== //
        updateCountdown();
        setInterval(updateCountdown, 1000);
    </script>
</body>
  </html>
